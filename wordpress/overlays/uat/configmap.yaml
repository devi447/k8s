apiVersion: v1
kind: ConfigMap
metadata:
  name: wp-config
data:
  wp-config.php: |
    <?php

    /** Database settings */
    define('DB_NAME', getenv('WORDPRESS_DB_NAME'));
    define('DB_USER', getenv('WORDPRESS_DB_USER'));
    define('DB_PASSWORD', getenv('WORDPRESS_DB_PASSWORD'));
    define('DB_HOST', getenv('WORDPRESS_DB_HOST'));
    define('DB_CHARSET', 'utf8');
    define('DB_COLLATE', '');

    /**
     * WordPress database table prefix.
     * Must NOT be empty.
     */
    $table_prefix = 'wp_';

    /**
     * ðŸ” FORCE HTTPS SITE URL (VERY IMPORTANT)
     */
    define('WP_HOME', 'https://wordpress-uat.showmysite.click');
    define('WP_SITEURL', 'https://wordpress-uat.showmysite.click');

    /**
     * Handle HTTPS correctly behind AWS ALB
     */
    if (
        isset($_SERVER['HTTP_X_FORWARDED_PROTO']) &&
        $_SERVER['HTTP_X_FORWARDED_PROTO'] === 'https'
    ) {
        $_SERVER['HTTPS'] = 'on';
    }

    define('FORCE_SSL_ADMIN', true);
    define('FORCE_SSL_LOGIN', true);

    /**
     * Absolute path to the WordPress directory.
     */
    if ( ! defined('ABSPATH') ) {
        define('ABSPATH', '/var/www/html/');
    }

    /**
     * WordPress debugging (DISABLED for production)
     */
    define('WP_DEBUG', false);

    /** Sets up WordPress vars and included files. */
    require_once ABSPATH . 'wp-settings.php';
